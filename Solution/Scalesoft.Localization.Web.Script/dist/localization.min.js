var Localization=function(){function t(){this.mGlobalScope="global",this.mCultureCookieName="Localization.Culture",this.mDictionary={}}return t.prototype.translate=function(t,n,o){var r=this.getDictionary(n,o).translate(t);return null==r?this.getFallbackTranslation(t,n,o):r},t.prototype.translateFormat=function(t,n,o,r){var i=this.getDictionary(o,r).translateFormat(t,n);return null==i?this.getFallbackTranslation(t,o,r):i},t.prototype.getFallbackTranslation=function(t,n,o){return console.log("Localized string with key="+t+" was not found in dictionary="+n+" with culture="+o),{name:t,value:"X{undefined}",resourceNotFound:!0}},t.prototype.configureSiteUrl=function(t){this.mSiteUrl=t},t.prototype.getDictionary=function(t,n){return t=this.checkScope(t),n=this.checkCultureName(n),this.getLocalizationDictionary(t,n)},t.prototype.checkCultureName=function(t){return t||this.getCurrentCulture()},t.prototype.checkScope=function(t){return t||this.mGlobalScope},t.prototype.getLocalizationDictionary=function(t,n){var o=this.dictionaryKey(t,n),r=this.mDictionary[o];return void 0===r?(this.downloadDictionary(t,n),this.mDictionary[o]):r},t.prototype.dictionaryKey=function(t,n){return t.concat("|",n)},t.prototype.downloadDictionary=function(o,r){var i=this;this.markDownloading(!0,o,r);var e=new XMLHttpRequest;e.onreadystatechange=function(){if(e.readyState===XMLHttpRequest.DONE){if(200===e.status){var t=e.responseText,n=i.dictionaryKey(o,r);i.mDictionary[n]=new LocalizationDictionary(t)}i.markDownloading(!1,o,r)}};var t=this.mSiteUrl;t&&"/"===t.charAt(t.length-1)&&(t=t.substring(0,t.length-1)),e.open("GET",t+"/Localization/Dictionary?scope="+o,!1),e.send()},t.prototype.getCurrentCulture=function(){if(""===this.mCurrentCulture){var t=this.getCurrentCultureCookie();this.setCurrentCulture(t)}return this.mCurrentCulture},t.prototype.setCurrentCulture=function(t){this.mCurrentCulture=t},t.prototype.getCurrentCultureCookie=function(){return LocalizationUtils.getCookie(this.mCultureCookieName)},t.prototype.markDownloading=function(t,n,o){this.mDownloadingCulture=t?(this.mDownloadingScope=n,o):this.mDownloadingScope="",this.mDownloading=t},t}(),LocalizationDictionary=function(){function t(t){this.mDictionary=JSON.parse(t)}return t.prototype.translate=function(t){var n=this.mDictionary[t];return void 0===n?null:n},t.prototype.translateFormat=function(t,n){var o=this.translate(t);return{name:t,value:n?this.formatString(o,n):o.value,resourceNotFound:o.resourceNotFound}},t.prototype.formatString=function(t,i){return t.value.replace(/\{\s*([^}\s]+)\s*\}/g,function(t,n,o,r){return i[n]})},t}(),LocalizationUtils=function(){function t(){}return t.getCookie=function(n){return n+="=",document.cookie.split(";").map(function(t){return t.trim()}).filter(function(t){return 0===t.indexOf(n)}).map(function(t){return decodeURIComponent(t.substring(n.length))})[0]||null},t}();